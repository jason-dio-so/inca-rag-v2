# ADR-001: LLM Controlled Usage

## Status
Accepted

## Context
LLM은 텍스트 이해와 추출에 강력하지만, 보험 도메인의 정확한 의미 판단에는 위험하다.
LLM 출력을 무비판적으로 수용하면 coverage_code 오염, 잘못된 비교 결과가 발생한다.
LLM 사용 영역을 명확히 구분해야 한다.

## Decision
**LLM output은 항상 candidate이며, truth가 아니다.**

### 허용 영역

| 용도 | 설명 |
|------|------|
| 담보명 후보 추출 | 문서에서 담보명처럼 보이는 텍스트 추출 |
| 사용자 질의 해석 | 질의 의도 파악, 키워드 추출 |
| 금액/조건 추출 | 약관에서 보장금액, 지급조건 텍스트 추출 |
| 요약 생성 | 비교 결과 요약문 생성 |

### 금지 영역

| 용도 | 이유 |
|------|------|
| coverage_code 추론 | canonical은 신정원만 결정 |
| 통일담보명 판단 | 의미 기준은 coverage_standard |
| 담보 동등성 판단 | alias 테이블로만 판단 |
| DB 자동 반영 | 검증 없는 반영은 오염 초래 |

### 사용 규칙

1. **Candidate 원칙**
   - LLM 출력은 후보(candidate)로만 취급
   - 최종 결정은 canonical 테이블 참조로 확정

2. **승인 필수**
   - LLM 추출 결과의 DB 반영은 human 승인 필요
   - 자동 반영 파이프라인 구축 금지

3. **로깅 필수**
   - LLM 사용 시 입력/출력 로깅
   - 오류 추적 가능하게 유지

## Consequences

### 긍정적
- LLM 오류로 인한 데이터 오염 방지
- 의미 판단의 일관성 유지
- 문제 발생 시 원인 추적 가능

### 부정적
- 완전 자동화 불가
- Human 검증 비용 발생
